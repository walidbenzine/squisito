<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Admin</title>
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  </head>
  <body>

    <div id="nc-root"></div>
    <script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>

    <script>
      CMS.registerPreviewTemplate("gallery", ({ entry }) => {
        const images = entry.getIn(["data", "images"]) || [];
        return (
          <div>
            {images.map((img, i) => (
              <div key={i} style={{ marginBottom: "1rem" }}>
                <img src={img.get("image")} alt={img.get("alt_fr")} style={{ width: "100px" }} />
                <p>{img.get("alt_fr")}</p>
              </div>
            ))}
          </div>
        );
      });
    </script>
  </body>
</html>
